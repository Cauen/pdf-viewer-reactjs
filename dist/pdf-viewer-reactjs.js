"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=_interopDefault(require("react")),PropTypes=_interopDefault(require("prop-types")),PDF=_interopDefault(require("react-pdf-js"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}require("jquery/dist/jquery.min.js"),require("bootstrap/dist/css/bootstrap.min.css"),require("bootstrap/dist/js/bootstrap.min.js"),require("material-design-icons/iconfont/material-icons.css");var NextPageButton=function(e){var t=e.css,a=e.page,n=e.pages,o=e.handleNextClick,s="\n    ".concat(t||"btn btn-sm btn-link text-white pl-2","\n    ").concat(a===n?" disabled":"","\n  ");return React.createElement("button",{className:s,onClick:o},React.createElement("i",{className:"material-icons"},"keyboard_arrow_right"))};NextPageButton.propTypes={css:PropTypes.string,page:PropTypes.number.isRequired,pages:PropTypes.number.isRequired,handleNextClick:PropTypes.func.isRequired};var PagesIndicator=function(e){var t=e.css,a=e.page,n=e.pages,o=t||"small pt-2";return React.createElement("div",{className:o},"Page ".concat(a," / ").concat(n))};PagesIndicator.propTypes={css:PropTypes.string,page:PropTypes.number.isRequired,pages:PropTypes.number.isRequired};var PreviousPageButton=function(e){var t=e.css,a=e.page,n=e.handlePrevClick,o="\n    ".concat(t||"btn btn-sm btn-link text-white pr-2","\n    ").concat(1===a?" disabled":"","\n  ");return React.createElement("button",{className:o,onClick:n},React.createElement("i",{className:"material-icons"},"keyboard_arrow_left"))};PreviousPageButton.propTypes={css:PropTypes.string,page:PropTypes.number.isRequired,handlePrevClick:PropTypes.func.isRequired};var ZoomIn=function(e){var t=e.css,a=e.scale,n=e.maxScale,o=e.handleZoomIn,s="".concat(t||"btn btn-sm btn-link text-white pl-2").concat(a===n?" disabled":"");return React.createElement("button",{type:"button",className:s,onClick:o},React.createElement("i",{className:"material-icons"},"zoom_in"))};ZoomIn.propTypes={css:PropTypes.string,scale:PropTypes.number.isRequired,maxScale:PropTypes.number.isRequired,handleZoomIn:PropTypes.func.isRequired};var ZoomOut=function(e){var t=e.css,a=e.scale,n=e.minScale,o=e.handleZoomOut,s="".concat(t||"btn btn-sm btn-link text-white pr-2").concat(a===n?" disabled":"");return React.createElement("button",{type:"button",className:s,onClick:o},React.createElement("i",{className:"material-icons"},"zoom_out"))};ZoomOut.propTypes={css:PropTypes.string,scale:PropTypes.number.isRequired,minScale:PropTypes.number.isRequired,handleZoomOut:PropTypes.func.isRequired};var ResetZoom=function(e){var t=e.css,a=e.scale,n=e.defaultScale,o=e.handleResetZoom,s="".concat(t||"btn btn-sm btn-link text-white px-2","\n    ").concat(a===n?" disabled":"");return React.createElement("button",{type:"button",className:s,onClick:o},React.createElement("i",{className:"material-icons"},"refresh"))};ResetZoom.propTypes={css:PropTypes.string,scale:PropTypes.number.isRequired,defaultScale:PropTypes.number.isRequired,handleResetZoom:PropTypes.func.isRequired};var RotateLeft=function(e){var t=e.css,a=e.rotationAngle,n=e.handleRotateLeft,o="\n    ".concat(t||"btn btn-sm btn-link text-white pr-2","\n    ").concat(-90===a?" disabled":"","\n  ");return React.createElement("button",{type:"button",className:o,onClick:n},React.createElement("i",{className:"material-icons"},"rotate_left"))};RotateLeft.propTypes={css:PropTypes.string,rotationAngle:PropTypes.number.isRequired,handleRotateLeft:PropTypes.func.isRequired};var ResetRotation=function(e){var t=e.css,a=e.rotationAngle,n=e.handleResetRotation,o="\n    ".concat(t||"btn btn-sm btn-link text-white px-2","\n    ").concat(0===a||360===a?" disabled":"","\n  ");return React.createElement("button",{type:"button",className:o,onClick:n},React.createElement("i",{className:"material-icons"},"refresh"))};ResetRotation.propTypes={css:PropTypes.string,rotationAngle:PropTypes.number.isRequired,handleResetRotation:PropTypes.func.isRequired};var RotateRight=function(e){var t=e.css,a=e.rotationAngle,n=e.handleRotateRight,o="\n    ".concat(t||"btn btn-sm btn-link text-white pl-2","\n    ").concat(90===a?" disabled":"","\n  ");return React.createElement("button",{type:"button",className:o,onClick:n},React.createElement("i",{className:"material-icons"},"rotate_right"))};RotateRight.propTypes={css:PropTypes.string,rotationAngle:PropTypes.number.isRequired,handleRotateRight:PropTypes.func.isRequired};var Navigation=function(e){var t=e.page,a=e.pages,n=e.scale,o=e.defaultScale,s=e.maxScale,i=e.minScale,r=e.rotationAngle,l=e.hideZoom,p=e.hideRotation,c=e.css,u=e.handlePrevClick,h=e.handleNextClick,m=e.handleZoomIn,d=e.handleResetZoom,R=e.handleZoomOut,y=e.handleRotateLeft,g=e.handleResetRotation,P=e.handleRotateRight;return React.createElement("div",{className:c.navbarWrapper?c.navbarWrapper:"container rounded bg-dark text-white"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-4"},l?void 0:React.createElement("div",{className:"btn-group",role:"group"},React.createElement(ZoomOut,{scale:n,minScale:i,css:c.zoomOutBtn,handleZoomOut:R}),React.createElement(ResetZoom,{scale:n,defaultScale:o,css:c.resetZoomBtn,handleResetZoom:d}),React.createElement(ZoomIn,{scale:n,maxScale:s,css:c.zoomInBtn,handleZoomIn:m}))),React.createElement("div",{className:"col-sm-4"},React.createElement("div",{className:"btn-group",role:"group"},React.createElement(PreviousPageButton,{css:c.previousPageBtn,page:t,pages:a,handlePrevClick:u}),React.createElement(PagesIndicator,{css:c.pageIndicator,page:t,pages:a}),React.createElement(NextPageButton,{css:c.nextPageBtn,page:t,pages:a,handleNextClick:h}))),React.createElement("div",{className:"col-sm-4"},p?void 0:React.createElement("div",{className:"btn-group",role:"group"},React.createElement(RotateLeft,{css:c.rotateLeftBtn,rotationAngle:r,handleRotateLeft:y}),React.createElement(ResetRotation,{css:c.resetRotationBtn,rotationAngle:r,handleResetRotation:g}),React.createElement(RotateRight,{css:c.rotateRightBtn,rotationAngle:r,handleRotateRight:P})))))};Navigation.propTypes={page:PropTypes.number.isRequired,pages:PropTypes.number.isRequired,scale:PropTypes.number,defaultScale:PropTypes.number,maxScale:PropTypes.number,minScale:PropTypes.number,rotationAngle:PropTypes.number,hideZoom:PropTypes.bool,hideRotation:PropTypes.bool,css:PropTypes.shape({navbarWrapper:PropTypes.string,pages:PropTypes.string,pageIndicator:PropTypes.string,previousPageBtn:PropTypes.string,nextPageBtn:PropTypes.string,zoomOutBtn:PropTypes.string,resetZoomBtn:PropTypes.string,zoomInBtn:PropTypes.string,rotateLeftBtn:PropTypes.string,resetRotationBtn:PropTypes.string,rotateRightBtn:PropTypes.string}),elements:PropTypes.shape({previousPageBtn:PropTypes.any,nextPageBtn:PropTypes.any,pages:PropTypes.any}),handlePrevClick:PropTypes.func.isRequired,handleNextClick:PropTypes.func.isRequired,handleZoomIn:PropTypes.func.isRequired,handleResetZoom:PropTypes.func.isRequired,handleZoomOut:PropTypes.func.isRequired,handleRotateLeft:PropTypes.func.isRequired,handleResetRotation:PropTypes.func.isRequired,handleRotateRight:PropTypes.func.isRequired},Navigation.defaultProps={css:{},elements:{}};var Styles={canvas:{height:"1000px",maxHeight:"1000px",maxWidth:"1000px",overflow:"auto"}},PDFViewer=function(){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).state={pages:0,page:1,scale:1,defaultScale:1,scaleStep:1,maxScale:3,minScale:1,rotationAngle:0},e.onDocumentComplete=e.onDocumentComplete.bind(_assertThisInitialized(e)),e.handlePrevClick=e.handlePrevClick.bind(_assertThisInitialized(e)),e.handleNextClick=e.handleNextClick.bind(_assertThisInitialized(e)),e.handleZoomIn=e.handleZoomIn.bind(_assertThisInitialized(e)),e.handleResetZoom=e.handleResetZoom.bind(_assertThisInitialized(e)),e.handleZoomOut=e.handleZoomOut.bind(_assertThisInitialized(e)),e.handleRotateLeft=e.handleRotateLeft.bind(_assertThisInitialized(e)),e.handleResetRotation=e.handleResetRotation.bind(_assertThisInitialized(e)),e.handleRotateRight=e.handleRotateRight.bind(_assertThisInitialized(e)),e}return _inherits(t,React.Component),_createClass(t,[{key:"componentDidMount",value:function(){this.setState({pages:null,page:this.props.page||this.state.page,scale:this.props.scale||this.state.scale,defaultScale:this.props.scale||this.state.scale,scaleStep:this.props.scaleStep||this.state.scaleStep,maxScale:this.props.maxScale||this.state.maxScale,minScale:this.props.minScale||this.state.minScale,rotationAngle:this.props.rotationAngle||this.state.rotationAngle})}},{key:"onDocumentComplete",value:function(e){this.setState({pages:e})}},{key:"handlePrevClick",value:function(){1!==this.state.page&&(this.setState({page:this.state.page-1}),this.props.onPrevBtnClick&&this.props.onPrevBtnClick(this.state.page-1))}},{key:"handleNextClick",value:function(){this.state.page!==this.state.pages&&(this.setState({page:this.state.page+1}),this.props.onNextBtnClick&&this.props.onNextBtnClick(this.state.page+1))}},{key:"handleZoomIn",value:function(){this.state.scale<this.state.maxScale&&this.setState({scale:this.state.scale+this.state.scaleStep}),this.props.onZoom&&this.props.onZoom(this.state.scale+this.state.scaleStep)}},{key:"handleResetZoom",value:function(){this.setState({scale:this.state.defaultScale}),this.props.onZoom&&this.props.onZoom(this.state.defaultScale)}},{key:"handleZoomOut",value:function(){this.state.scale>this.state.minScale&&this.setState({scale:this.state.scale-this.state.scaleStep}),this.props.onZoom&&this.props.onZoom(this.state.scale-this.state.scaleStep)}},{key:"handleRotateLeft",value:function(){-90!==this.state.rotationAngle&&this.setState({rotationAngle:-90}),this.props.onRotation&&this.props.onRotation(-90)}},{key:"handleResetRotation",value:function(){0===this.state.rotationAngle&&360===this.state.rotationAngle||this.setState({rotationAngle:360}),this.props.onRotation&&this.props.onRotation(0)}},{key:"handleRotateRight",value:function(){90!==this.state.rotationAngle&&this.setState({rotationAngle:90}),this.props.onRotation&&this.props.onRotation(90)}},{key:"render",value:function(){var e=this.props.document,t=this.props,a=t.loader,n=t.hideNavbar,o=t.hideZoom,s=t.hideRotation,i=t.navbarOnTop,r=t.navigation,l=t.css,p=t.canvasCss,c=t.onDocumentClick,u=this.state,h=u.page,m=u.pages,d=u.scale,R=u.defaultScale,y=u.maxScale,g=u.minScale,P=u.rotationAngle,f=r,b=React.createElement(PDF,{file:e.file||e.url,content:e.base64,binaryContent:e.binary,documentInitParameters:e.connection,loading:a,page:h,scale:d,rotate:P,onDocumentComplete:this.onDocumentComplete}),T=null;return!n&&0<m&&(T=!r||r&&"object"===_typeof(r)?React.createElement(Navigation,{page:h,pages:m,scale:d,defaultScale:R,maxScale:y,minScale:g,rotationAngle:P,hideZoom:o,hideRotation:s,css:r?r.css:void 0,handleNextClick:this.handleNextClick,handlePrevClick:this.handlePrevClick,handleZoomIn:this.handleZoomIn,handleResetZoom:this.handleResetZoom,handleZoomOut:this.handleZoomOut,handleRotateLeft:this.handleRotateLeft,handleResetRotation:this.handleResetRotation,handleRotateRight:this.handleRotateRight}):React.createElement(f,{page:h,pages:m,scale:d,defaultScale:R,maxScale:y,minScale:g,rotationAngle:P,hideZoom:o,hideRotation:s,handleNextClick:this.handleNextClick,handlePrevClick:this.handlePrevClick,handleZoomIn:this.handleZoomIn,handleResetZoom:this.handleResetZoom,handleZoomOut:this.handleZoomOut,handleRotateLeft:this.handleRotateLeft,handleResetRotation:this.handleResetRotation,handleRotateRight:this.handleRotateRight})),React.createElement("div",{className:l||"container text-center"},i?React.createElement("div",null,React.createElement("div",null,T),React.createElement("div",{className:p||"",style:p?{}:Styles.canvas,onClick:c},b)):React.createElement("div",null,React.createElement("div",{className:p||"",style:p?{}:Styles.canvas,onClick:c},b),React.createElement("div",null,T)))}}]),t}();PDFViewer.propTypes={document:PropTypes.shape({file:PropTypes.any,url:PropTypes.string,connection:PropTypes.shape({url:PropTypes.string.isRequired}),base64:PropTypes.string,binary:PropTypes.shape({data:PropTypes.any})}).isRequired,loader:PropTypes.node,page:PropTypes.number,scale:PropTypes.number,scaleStep:PropTypes.number,maxScale:PropTypes.number,minScale:PropTypes.number,css:PropTypes.string,canvasCss:PropTypes.string,rotationAngle:PropTypes.number,onDocumentClick:PropTypes.func,onPrevBtnClick:PropTypes.func,onNextBtnClick:PropTypes.func,onZoom:PropTypes.func,onRotation:PropTypes.func,hideNavbar:PropTypes.bool,navbarOnTop:PropTypes.bool,hideZoom:PropTypes.bool,hideRotation:PropTypes.bool,navigation:PropTypes.oneOfType([PropTypes.shape({css:PropTypes.shape({navbarWrapper:PropTypes.string,zoomOutBtn:PropTypes.string,resetZoomBtn:PropTypes.string,zoomInBtn:PropTypes.string,previousPageBtn:PropTypes.string,pageIndicator:PropTypes.string,nextPageBtn:PropTypes.string,rotateLeftBtn:PropTypes.string,resetRotationBtn:PropTypes.string,rotateRightBtn:PropTypes.string})}),PropTypes.any])},PDFViewer.defaultProps={hideNavbar:!1,hideZoom:!1,hideRotation:!1,navbarOnTop:!1},module.exports=PDFViewer;
